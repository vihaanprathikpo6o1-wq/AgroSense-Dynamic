<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroSense Monitor</title>
    <!-- Load Poppins Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for modern aesthetic and mobile focus */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f4f7f6;
            color: #333;
        }
        .card {
            background-color: #ffffff;
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
            border: 1px solid #e2e8f0; /* Subtle border for definition */
        }
        .alert-log {
            list-style-type: none;
            padding: 0;
            max-height: 250px;
            overflow-y: auto;
        }
        .log-item {
            padding: 0.75rem;
            border-bottom: 1px solid #e2e8f0;
            transition: background-color 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .log-item.critical {
            background-color: #fee2e2; /* Red-100 */
            color: #ef4444; /* Red-500 */
            font-weight: 600;
        }
        .log-item:last-child {
            border-bottom: none;
        }
        .language-btn {
            /* Ensure these look like solid buttons */
            @apply px-4 py-2 text-sm bg-gray-200 text-gray-700 rounded-lg transition duration-150 ease-in-out hover:bg-gray-300 shadow-sm;
        }
        .language-btn.active {
            @apply bg-green-600 text-white hover:bg-green-700 font-semibold shadow-md;
        }
        /* Toast Notification Styling (Pop-ups) */
        #toastContainer {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
            max-width: 300px;
        }
        .toast {
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s;
            transform: translateY(-20px);
        }
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
        .toast.t2 { background-color: #d1e7dd; color: #0f5132; border: 1px solid #badbcc; }
        .toast.t3 { background-color: #f8d7da; color: #842029; border: 1px solid #f5c2c7; font-weight: bold; }

        /* Power Bar Styling */
        .power-bar-container {
            height: 10px;
            background-color: #e5e7eb;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 0.5rem;
        }
        .power-bar {
            height: 100%;
            transition: width 0.5s, background-color 0.5s;
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <!-- Toast Notification Container -->
    <div id="toastContainer"></div>

    <div class="max-w-xl mx-auto">
        <header class="text-center mb-6">
            <h1 class="text-3xl font-extrabold text-green-700">AgroSense Farm Monitor</h1>
            <p class="text-gray-500" id="motto">Smart Defense, Sustainable Yield.</p>
        </header>

        <!-- Language Selector -->
        <div class="card mb-6">
            <h2 class="text-lg font-semibold mb-3 text-gray-700" id="langTitle">Select Language</h2>
            <div id="languageButtons" class="flex flex-wrap justify-center gap-2">
                <button class="language-btn active" data-lang="en">English</button>
                <button class="language-btn" data-lang="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
                <button class="language-btn" data-lang="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</button>
                <button class="language-btn" data-lang="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</button>
                <button class="language-btn" data-lang="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</button>
                <button class="language-btn" data-lang="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
            </div>
        </div>

        <!-- Card 1: Connection & Status -->
        <div class="card text-center">
            <p class="text-lg font-medium mb-4" id="connStatusLabel">BLE Connection Status:</p>
            <p id="connectionStatus" class="font-extrabold text-2xl text-red-500">Disconnected</p>
            <button id="connectButton" class="w-full mt-4 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-150 shadow-md">
                Connect to System
            </button>
        </div>

        <!-- NEW CARD 2: Power Status (MOVED UP) -->
        <div class="card">
            <h2 class="text-xl font-semibold mb-3 text-indigo-700" id="powerTitle">Power Status</h2>
            <div class="space-y-3">
                <p class="text-base flex justify-between items-center">
                    <span id="usageLabel" class="font-medium">Current Usage:</span>
                    <span id="powerUsageValue" class="font-bold text-gray-700">-- W</span>
                </p>
                <p class="text-base">
                    <span id="leftLabel" class="font-medium">Battery Left:</span>
                    <span id="powerLeftValue" class="font-bold text-gray-700 ml-2">-- %</span>
                    <span id="batteryWarning" class="ml-2 text-xs text-red-600 font-semibold hidden"></span>
                </p>
                <div class="power-bar-container">
                    <div id="powerBar" class="power-bar bg-green-500" style="width: 0%;"></div>
                </div>
            </div>
        </div>

        <!-- OLD CARD 2: Tier 1 Status (Micro-Pest) -->
        <div class="card">
            <h2 class="text-xl font-semibold mb-3 text-green-700" id="tier1Title">Tier 1 Status (Micro-Pest)</h2>
            <p class="text-lg flex justify-between items-center">
                <span id="strobeLabel">Strobe Deterrent:</span>
                <span id="strobeStatus" class="font-bold text-gray-500">Inactive</span>
            </p>
        </div>

        <!-- Card 4: Tier 2 Alerts Log (Wildlife) -->
        <div class="card">
            <h2 class="text-xl font-semibold mb-3 text-green-700" id="tier2Title">Tier 2 Alerts (Wildlife)</h2>
            <div class="bg-gray-50 rounded-lg border border-gray-200">
                <ul id="tier2Log" class="alert-log divide-y divide-gray-200">
                    <li class="log-item text-gray-500" id="tier2Initial">Awaiting Tier 2 alerts...</li>
                </ul>
            </div>
        </div>

        <!-- Card 5: Tier 3 Alerts Log (Theft) -->
        <div class="card">
            <h2 class="text-xl font-semibold mb-3 text-red-700" id="tier3Title">Tier 3 Alerts (Theft)</h2>
            <div class="bg-gray-50 rounded-lg border border-gray-200">
                <ul id="tier3Log" class="alert-log divide-y divide-gray-200">
                    <li class="log-item text-gray-500" id="tier3Initial">Awaiting Tier 3 alerts...</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // --- GATT UUIDS (Placeholders) ---
        const AGROSENSE_SERVICE_UUID = '0000ff00-1212-efde-1523-785fef13cc22';
        const STROBE_STATUS_CHAR_UUID = '0000ff01-1212-efde-1523-785fef13cc22';
        const ALERTS_CHAR_UUID = '0000ff02-1212-efde-1523-785fef13cc22';
        
        // --- State and DOM Elements ---
        let currentLanguage = 'en';
        let simulationTimer;
        let powerTimer;
        let isConnected = false;
        let powerLeft = 100.0;
        let strobeStatusIndex = 0;
        const strobeStatusKeys = ['strobeInactive', 'strobeStatusChecking', 'strobeStatusLow', 'strobeStatusHigh'];
        const theftLocations = ['Motor Room', 'Storage Shed', 'Main Gate', 'Perimeter Fence'];
        let locationIndex = 0;


        const connectionStatusElement = document.getElementById('connectionStatus');
        const connectButton = document.getElementById('connectButton');
        const strobeStatusElement = document.getElementById('strobeStatus');
        const toastContainer = document.getElementById('toastContainer');
        const langButtons = document.querySelectorAll('.language-btn');
        const powerUsageValue = document.getElementById('powerUsageValue');
        const powerLeftValue = document.getElementById('powerLeftValue');
        const powerBar = document.getElementById('powerBar');
        const batteryWarning = document.getElementById('batteryWarning');
        
        const tier2Log = document.getElementById('tier2Log');
        const tier3Log = document.getElementById('tier3Log');


        // --- Translation Data ---
        const translations = {
            en: {
                motto: 'Smart Defense, Sustainable Yield.',
                langTitle: 'Select Language',
                connStatusLabel: 'BLE Connection Status:',
                connect: 'Connect to System',
                connected: 'Connected!',
                disconnected: 'Disconnected',
                strobeLabel: 'Strobe Deterrent:',
                tier1Title: 'Tier 1 Status (Micro-Pest)',
                tier2Title: 'Tier 2 Alerts (Wildlife)',
                tier3Title: 'Tier 3 Alerts (Theft)',
                powerTitle: 'Power Status',
                usageLabel: 'Current Usage:',
                leftLabel: 'Battery Left:',
                lowBattery: 'LOW BATTERY!',
                tier2Initial: 'Awaiting Tier 2 alerts...',
                tier3Initial: 'Awaiting Tier 3 alerts...',
                connecting: 'Connecting...',
                readingStatus: 'Connected. Reading Status...',
                strobeInactive: 'Inactive',
                strobeStatusChecking: 'Checking...',
                strobeStatusLow: 'Active (Low Intensity)',
                strobeStatusHigh: 'Active (High Intensity)',
                wildlifeAlertMsg: 'Wildlife Detected. Deterrent Activated.',
                theftAlertMsg: (loc) => `CRITICAL: Movement detected in ${loc}. Possible theft alert; please check immediately.`,
                connectionFailed: 'Connection Failed.',
                connectionLost: 'Connection Lost. Reconnect.',
                toastT2: 'üö® WILDLIFE ALERT',
                toastT3: 'üõë THEFT ALERT'
            },
            hi: {
                motto: '‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§∞‡§ï‡•ç‡§∑‡§æ, ‡§ü‡§ø‡§ï‡§æ‡§ä ‡§â‡§™‡§ú‡•§',
                langTitle: '‡§≠‡§æ‡§∑‡§æ ‡§ö‡§Ø‡§®',
                connStatusLabel: '‡§¨‡•Ä‡§è‡§≤‡§à ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§∏‡•ç‡§•‡§ø‡§§‡§ø:',
                connect: '‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç',
                connected: '‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§°!',
                disconnected: '‡§°‡§ø‡§∏‡•ç‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§°',
                strobeLabel: '‡§∏‡•ç‡§ü‡•ç‡§∞‡•ã‡§¨ ‡§®‡§ø‡§µ‡§æ‡§∞‡§ï:',
                tier1Title: '‡§ü‡§ø‡§Ø‡§∞ 1 ‡§∏‡•ç‡§•‡§ø‡§§‡§ø (‡§õ‡•ã‡§ü‡•á ‡§ï‡•Ä‡§ü)',
                tier2Title: '‡§ü‡§ø‡§Ø‡§∞ 2 ‡§Ö‡§≤‡§∞‡•ç‡§ü (‡§ú‡§Ç‡§ó‡§≤‡•Ä ‡§ú‡§æ‡§®‡§µ‡§∞)',
                tier3Title: '‡§ü‡§ø‡§Ø‡§∞ 3 ‡§Ö‡§≤‡§∞‡•ç‡§ü (‡§ö‡•ã‡§∞‡•Ä)',
                powerTitle: '‡§™‡§æ‡§µ‡§∞ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø',
                usageLabel: '‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§â‡§™‡§Ø‡•ã‡§ó:',
                leftLabel: '‡§¨‡•à‡§ü‡§∞‡•Ä ‡§∂‡•á‡§∑:',
                lowBattery: '‡§¨‡•à‡§ü‡§∞‡•Ä ‡§ï‡§Æ ‡§π‡•à!',
                tier2Initial: '‡§ü‡§ø‡§Ø‡§∞ 2 ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§π‡•à...',
                tier3Initial: '‡§ü‡§ø‡§Ø‡§∞ 3 ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§π‡•à...',
                connecting: '‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...',
                readingStatus: '‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§°‡•§ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§™‡§¢‡§º ‡§∞‡§π‡§æ ‡§π‡•à...',
                strobeInactive: '‡§®‡§ø‡§∑‡•ç‡§ï‡•ç‡§∞‡§ø‡§Ø',
                strobeStatusChecking: '‡§ú‡§æ‡§Å‡§ö ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à...',
                strobeStatusLow: '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø (‡§ï‡§Æ ‡§§‡•Ä‡§µ‡•ç‡§∞‡§§‡§æ)',
                strobeStatusHigh: '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø (‡§â‡§ö‡•ç‡§ö ‡§§‡•Ä‡§µ‡•ç‡§∞‡§§‡§æ)',
                wildlifeAlertMsg: '‡§ú‡§Ç‡§ó‡§≤‡•Ä ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§ï‡§æ ‡§™‡§§‡§æ ‡§ö‡§≤‡§æ‡•§ ‡§®‡§ø‡§µ‡§æ‡§∞‡§ï ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø!',
                theftAlertMsg: (loc) => `‡§ó‡§Ç‡§≠‡•Ä‡§∞: ${loc} ‡§Æ‡•á‡§Ç ‡§π‡§≤‡§ö‡§≤ ‡§™‡§æ‡§à ‡§ó‡§à‡•§ ‡§ö‡•ã‡§∞‡•Ä ‡§ï‡•Ä ‡§Ü‡§∂‡§Ç‡§ï‡§æ; ‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ú‡§æ‡§Å‡§ö ‡§ï‡§∞‡•á‡§Ç‡•§`,
                connectionFailed: '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§µ‡§ø‡§´‡§≤‡•§',
                connectionLost: '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ü‡•Ç‡§ü ‡§ó‡§Ø‡§æ‡•§ ‡§™‡•Å‡§®‡§É ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§',
                toastT2: 'üö® ‡§ú‡§Ç‡§ó‡§≤‡•Ä ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§Ö‡§≤‡§∞‡•ç‡§ü',
                toastT3: 'üõë ‡§ö‡•ã‡§∞‡•Ä ‡§Ö‡§≤‡§∞‡•ç‡§ü'
            },
            te: {
                motto: '‡∞∏‡±ç‡∞Æ‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞∞‡∞ï‡±ç‡∞∑‡∞£, ‡∞∏‡±Å‡∞∏‡±ç‡∞•‡∞ø‡∞∞ ‡∞¶‡∞ø‡∞ó‡±Å‡∞¨‡∞°‡∞ø.',
                langTitle: '‡∞≠‡∞æ‡∞∑‡∞æ ‡∞é‡∞Ç‡∞™‡∞ø‡∞ï',
                connStatusLabel: 'BLE ‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞∑‡∞®‡±ç ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø:',
                connect: '‡∞∏‡∞ø‡∞∏‡±ç‡∞ü‡∞Æ‡±ç‚Äå‡∞ï‡∞ø ‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø',
                connected: '‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞ü‡±ç ‡∞Ö‡∞Ø‡±ç‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø!',
                disconnected: '‡∞°‡∞ø‡∞∏‡±ç‚Äå‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞ü‡±ç ‡∞Ö‡∞Ø‡±ç‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø',
                strobeLabel: '‡∞∏‡±ç‡∞ü‡±ç‡∞∞‡±ã‡∞¨‡±ç ‡∞®‡∞ø‡∞∞‡±ã‡∞ß‡∞ï‡∞Ç:',
                tier1Title: '‡∞ü‡±à‡∞∞‡±ç 1 ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø (‡∞∏‡±Ç‡∞ï‡±ç‡∞∑‡±ç‡∞Æ ‡∞ï‡±Ä‡∞ü‡∞ï‡∞æ‡∞≤‡±Å)',
                tier2Title: '‡∞ü‡±à‡∞∞‡±ç 2 ‡∞Ö‡∞≤‡∞∞‡±ç‡∞ü‡±ç‚Äå‡∞≤‡±Å (‡∞µ‡∞®‡±ç‡∞Ø‡∞™‡±ç‡∞∞‡∞æ‡∞£‡±Å‡∞≤‡±Å)',
                tier3Title: '‡∞ü‡±à‡∞∞‡±ç 3 ‡∞Ö‡∞≤‡∞∞‡±ç‡∞ü‡±ç‚Äå‡∞≤‡±Å (‡∞¶‡±ä‡∞Ç‡∞ó‡∞§‡∞®‡∞Ç)',
                powerTitle: '‡∞™‡∞µ‡∞∞‡±ç ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø',
                usageLabel: '‡∞™‡±ç‡∞∞‡∞∏‡±ç‡∞§‡±Å‡∞§ ‡∞µ‡∞ø‡∞®‡∞ø‡∞Ø‡±ã‡∞ó‡∞Ç:',
                leftLabel: '‡∞¨‡±ç‡∞Ø‡∞æ‡∞ü‡∞∞‡±Ä ‡∞Æ‡∞ø‡∞ó‡∞ø‡∞≤‡∞ø‡∞Ç‡∞¶‡∞ø:',
                lowBattery: '‡∞¨‡±ç‡∞Ø‡∞æ‡∞ü‡∞∞‡±Ä ‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ!',
                tier2Initial: '‡∞ü‡±à‡∞∞‡±ç 2 ‡∞π‡±Ü‡∞ö‡±ç‡∞ö‡∞∞‡∞ø‡∞ï‡∞≤ ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞µ‡±á‡∞ö‡∞ø ‡∞â‡∞Ç‡∞¶‡∞ø...',
                tier3Initial: '‡∞ü‡±à‡∞∞‡±ç 3 ‡∞π‡±Ü‡∞ö‡±ç‡∞ö‡∞∞‡∞ø‡∞ï‡∞≤ ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞µ‡±á‡∞ö‡∞ø ‡∞â‡∞Ç‡∞¶‡∞ø...',
                connecting: '‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞ü‡±ç ‡∞Ö‡∞µ‡±Å‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...',
                readingStatus: '‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞ü‡±ç ‡∞Ö‡∞Ø‡±ç‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø ‡∞ö‡∞¶‡±Å‡∞µ‡±Å‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...',
                strobeInactive: '‡∞®‡∞ø‡∞∑‡±ç‡∞ï‡±ç‡∞∞‡∞ø‡∞Ø‡∞Ç',
                strobeStatusChecking: '‡∞§‡∞®‡∞ø‡∞ñ‡±Ä ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...',
                strobeStatusLow: '‡∞ï‡±ç‡∞∞‡∞ø‡∞Ø‡∞æ‡∞∂‡±Ä‡∞≤‡∞Ç (‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞§‡±Ä‡∞µ‡±ç‡∞∞‡∞§)',
                strobeStatusHigh: '‡∞ï‡±ç‡∞∞‡∞ø‡∞Ø‡∞æ‡∞∂‡±Ä‡∞≤‡∞Ç (‡∞é‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞§‡±Ä‡∞µ‡±ç‡∞∞‡∞§)',
                wildlifeAlertMsg: '‡∞µ‡∞®‡±ç‡∞Ø‡∞™‡±ç‡∞∞‡∞æ‡∞£‡±Å‡∞≤‡±Å ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡±ç‡∞°‡∞æ‡∞Ø‡∞ø. ‡∞®‡∞ø‡∞∞‡±ã‡∞ß‡∞ï‡∞Ç ‡∞∏‡∞ï‡±ç‡∞∞‡∞ø‡∞Ø‡∞Ç ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø.',
                theftAlertMsg: (loc) => `‡∞ï‡±ç‡∞≤‡∞ø‡∞∑‡±ç‡∞ü‡∞Æ‡±à‡∞®: ${loc} ‡∞≤‡±ã ‡∞ï‡∞¶‡∞≤‡∞ø‡∞ï ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞¶‡±ä‡∞Ç‡∞ó‡∞§‡∞®‡∞Ç ‡∞Ö‡∞Ø‡±ç‡∞Ø‡±á ‡∞Ö‡∞µ‡∞ï‡∞æ‡∞∂‡∞Ç; ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞µ‡±Ü‡∞Ç‡∞ü‡∞®‡±á ‡∞§‡∞®‡∞ø‡∞ñ‡±Ä ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.`,
                connectionFailed: '‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞∑‡∞®‡±ç ‡∞µ‡∞ø‡∞´‡∞≤‡∞Ç.',
                connectionLost: '‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞∑‡∞®‡±ç ‡∞™‡±ã‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞§‡∞ø‡∞∞‡∞ø‡∞ó‡∞ø ‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.',
                toastT2: 'üö® ‡∞µ‡∞®‡±ç‡∞Ø‡∞™‡±ç‡∞∞‡∞æ‡∞£‡∞ø ‡∞π‡±Ü‡∞ö‡±ç‡∞ö‡∞∞‡∞ø‡∞ï',
                toastT3: 'üõë ‡∞¶‡±ä‡∞Ç‡∞ó‡∞§‡∞®‡∞Ç ‡∞π‡±Ü‡∞ö‡±ç‡∞ö‡∞∞‡∞ø‡∞ï'
            },
            kn: {
                motto: '‡≤∏‡≥ç‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ü‡≥ç ‡≤∞‡≤ï‡≥ç‡≤∑‡≤£‡≥Ü, ‡≤∏‡≥Å‡≤∏‡≥ç‡≤•‡≤ø‡≤∞ ‡≤á‡≤≥‡≥Å‡≤µ‡≤∞‡≤ø.',
                langTitle: '‡≤≠‡≤æ‡≤∑‡≤æ ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü',
                connStatusLabel: 'BLE ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï ‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø:',
                connect: '‡≤∏‡≤ø‡≤∏‡≥ç‡≤ü‡≤Æ‡≥ç‚Äå‡≤ó‡≥Ü ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤∏‡≤ø',
                connected: '‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü!',
                disconnected: '‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï ‡≤ï‡≤°‡≤ø‡≤§‡≤ó‡≥ä‡≤Ç‡≤°‡≤ø‡≤¶‡≥Ü',
                strobeLabel: '‡≤∏‡≥ç‡≤ü‡≥ç‡≤∞‡≥ã‡≤¨‡≥ç ‡≤®‡≤ø‡≤∞‡≥ã‡≤ß‡≤ï:',
                tier1Title: '‡≤∂‡≥ç‡≤∞‡≥á‡≤£‡≤ø 1 ‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø (‡≤∏‡≥Ç‡≤ï‡≥ç‡≤∑‡≥ç‡≤Æ ‡≤ï‡≥Ä‡≤ü)',
                tier2Title: '‡≤∂‡≥ç‡≤∞‡≥á‡≤£‡≤ø 2 ‡≤é‡≤ö‡≥ç‡≤ö‡≤∞‡≤ø‡≤ï‡≥Ü‡≤ó‡≤≥‡≥Å (‡≤µ‡≤®‡≥ç‡≤Ø‡≤ú‡≥Ä‡≤µ‡≤ø)',
                tier3Title: '‡≤∂‡≥ç‡≤∞‡≥á‡≤£‡≤ø 3 ‡≤é‡≤ö‡≥ç‡≤ö‡≤∞‡≤ø‡≤ï‡≥Ü‡≤ó‡≤≥‡≥Å (‡≤ï‡≤≥‡≥ç‡≤≥‡≤§‡≤®)',
                powerTitle: '‡≤™‡≤µ‡≤∞‡≥ç ‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø',
                usageLabel: '‡≤™‡≥ç‡≤∞‡≤∏‡≥ç‡≤§‡≥Å‡≤§ ‡≤¨‡≤≥‡≤ï‡≥Ü:',
                leftLabel: '‡≤¨‡≥ç‡≤Ø‡≤æ‡≤ü‡≤∞‡≤ø ‡≤â‡≤≥‡≤ø‡≤¶‡≤ø‡≤¶‡≥Ü:',
                lowBattery: '‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‡≤¨‡≥ç‡≤Ø‡≤æ‡≤ü‡≤∞‡≤ø!',
                tier2Initial: '‡≤∂‡≥ç‡≤∞‡≥á‡≤£‡≤ø 2 ‡≤é‡≤ö‡≥ç‡≤ö‡≤∞‡≤ø‡≤ï‡≥Ü‡≤ó‡≤≥‡≤ø‡≤ó‡≤æ‡≤ó‡≤ø ‡≤ï‡≤æ‡≤Ø‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü...',
                tier3Initial: '‡≤∂‡≥ç‡≤∞‡≥á‡≤£‡≤ø 3 ‡≤é‡≤ö‡≥ç‡≤ö‡≤∞‡≤ø‡≤ï‡≥Ü‡≤ó‡≤≥‡≤ø‡≤ó‡≤æ‡≤ó‡≤ø ‡≤ï‡≤æ‡≤Ø‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü...',
                connecting: '‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü...',
                readingStatus: '‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤ì‡≤¶‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü...',
                strobeInactive: '‡≤®‡≤ø‡≤∑‡≥ç‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø',
                strobeStatusChecking: '‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü...',
                strobeStatusLow: '‡≤∏‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø (‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‡≤§‡≥Ä‡≤µ‡≥ç‡≤∞‡≤§‡≥Ü)',
                strobeStatusHigh: '‡≤∏‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø (‡≤π‡≥Ü‡≤ö‡≥ç‡≤ö‡≤ø‡≤® ‡≤§‡≥Ä‡≤µ‡≥ç‡≤∞‡≤§‡≥Ü)',
                wildlifeAlertMsg: '‡≤µ‡≤®‡≥ç‡≤Ø‡≤ú‡≥Ä‡≤µ‡≤ø ‡≤™‡≤§‡≥ç‡≤§‡≥Ü‡≤Ø‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤®‡≤ø‡≤∞‡≥ã‡≤ß‡≤ï ‡≤∏‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≤ó‡≥ä‡≤≥‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.',
                theftAlertMsg: (loc) => `‡≤µ‡≤ø‡≤Æ‡≤∞‡≥ç‡≤∂‡≤æ‡≤§‡≥ç‡≤Æ‡≤ï: ${loc} ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ö‡≤≤‡≤®‡≥Ü ‡≤ï‡≤Ç‡≤°‡≥Å‡≤¨‡≤Ç‡≤¶‡≤ø‡≤¶‡≥Ü. ‡≤ï‡≤≥‡≥ç‡≤≥‡≤§‡≤®‡≤¶ ‡≤∏‡≤æ‡≤ß‡≥ç‡≤Ø‡≤§‡≥Ü; ‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤§‡≤ï‡≥ç‡≤∑‡≤£ ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≤ø.`,
                connectionFailed: '‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï ‡≤µ‡≤ø‡≤´‡≤≤‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.',
                connectionLost: '‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï ‡≤ï‡≤≥‡≥Ü‡≤¶‡≥Å‡≤π‡≥ã‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤Æ‡≤∞‡≥Å‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤∏‡≤ø.',
                toastT2: 'üö® ‡≤µ‡≤®‡≥ç‡≤Ø‡≤ú‡≥Ä‡≤µ‡≤ø ‡≤é‡≤ö‡≥ç‡≤ö‡≤∞‡≤ø‡≤ï‡≥Ü',
                toastT3: 'üõë ‡≤ï‡≤≥‡≥ç‡≤≥‡≤§‡≤® ‡≤é‡≤ö‡≥ç‡≤ö‡≤∞‡≤ø‡≤ï‡≥Ü'
            },
            ml: {
                motto: '‡¥∏‡µç‡¥Æ‡¥æ‡µº‡¥ü‡µç‡¥ü‡µç ‡¥™‡µç‡¥∞‡¥§‡¥ø‡¥∞‡µã‡¥ß‡¥Ç, ‡¥∏‡µÅ‡¥∏‡µç‡¥•‡¥ø‡¥∞ ‡¥µ‡¥ø‡¥≥‡¥µ‡µç.',
                langTitle: '‡¥≠‡¥æ‡¥∑ ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï',
                connStatusLabel: 'BLE ‡¥¨‡¥®‡µç‡¥ß‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µΩ ‡¥®‡¥ø‡¥≤:',
                connect: '‡¥∏‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡¥§‡µç‡¥§‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥¨‡¥®‡µç‡¥ß‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï',
                connected: '‡¥¨‡¥®‡µç‡¥ß‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ö‡µç‡¥ö‡µÅ!',
                disconnected: '‡¥µ‡¥ø‡¥ö‡µç‡¥õ‡µá‡¥¶‡¥ø‡¥ö‡µç‡¥ö‡µÅ',
                strobeLabel: '‡¥∏‡µç‡¥ü‡µç‡¥∞‡µã‡¥¨‡µç ‡¥™‡µç‡¥∞‡¥§‡¥ø‡¥∞‡µã‡¥ß‡¥Ç:',
                tier1Title: '‡¥§‡¥≤‡¥Ç 1 ‡¥®‡¥ø‡¥≤ (‡¥Æ‡µà‡¥ï‡µç‡¥∞‡µã-‡¥ï‡µÄ‡¥ü‡¥Ç)',
                tier2Title: '‡¥§‡¥≤‡¥Ç 2 ‡¥Ö‡¥≤‡µá‡µº‡¥ü‡µç‡¥ü‡µÅ‡¥ï‡µæ (‡¥µ‡¥®‡µç‡¥Ø‡¥ú‡µÄ‡¥µ‡¥ø)',
                tier3Title: '‡¥§‡¥≤‡¥Ç 3 ‡¥Ö‡¥≤‡µá‡µº‡¥ü‡µç‡¥ü‡µÅ‡¥ï‡µæ (‡¥Æ‡µã‡¥∑‡¥£‡¥Ç)',
                powerTitle: '‡¥™‡¥µ‡µº ‡¥®‡¥ø‡¥≤',
                usageLabel: '‡¥®‡¥ø‡¥≤‡¥µ‡¥ø‡¥≤‡µÜ ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥Ç:',
                leftLabel: '‡¥¨‡¥æ‡¥±‡µç‡¥±‡¥±‡¥ø ‡¥∂‡µá‡¥∑‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ:',
                lowBattery: '‡¥¨‡¥æ‡¥±‡µç‡¥±‡¥±‡¥ø ‡¥ï‡µÅ‡¥±‡¥µ‡µç!',
                tier2Initial: '‡¥§‡¥≤‡¥Ç 2 ‡¥Ö‡¥≤‡µá‡µº‡¥ü‡µç‡¥ü‡µÅ‡¥ï‡µæ‡¥ï‡µç‡¥ï‡¥æ‡¥Ø‡¥ø ‡¥ï‡¥æ‡¥§‡µç‡¥§‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ...',
                tier3Initial: '‡¥§‡¥≤‡¥Ç 3 ‡¥Ö‡¥≤‡µá‡µº‡¥ü‡µç‡¥ü‡µÅ‡¥ï‡µæ‡¥ï‡µç‡¥ï‡¥æ‡¥Ø‡¥ø ‡¥ï‡¥æ‡¥§‡µç‡¥§‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ...',
                connecting: '‡¥¨‡¥®‡µç‡¥ß‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ...',
                readingStatus: '‡¥¨‡¥®‡µç‡¥ß‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ö‡µç‡¥ö‡µÅ. ‡¥®‡¥ø‡¥≤ ‡¥µ‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ...',
                strobeInactive: '‡¥®‡¥ø‡¥∑‡µç‡¥ï‡µç‡¥∞‡¥ø‡¥Ø‡¥Ç',
                strobeStatusChecking: '‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ...',
                strobeStatusLow: '‡¥∏‡¥ú‡µÄ‡¥µ‡¥Ç (‡¥ï‡µÅ‡¥±‡¥û‡µç‡¥û ‡¥§‡µÄ‡¥µ‡µç‡¥∞‡¥§)',
                strobeStatusHigh: '‡¥∏‡¥ú‡µÄ‡¥µ‡¥Ç (‡¥â‡¥Ø‡µº‡¥®‡µç‡¥® ‡¥§‡µÄ‡¥µ‡µç‡¥∞‡¥§)',
                wildlifeAlertMsg: '‡¥µ‡¥®‡µç‡¥Ø‡¥ú‡µÄ‡¥µ‡¥ø‡¥ï‡¥≥‡µÜ ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥ø. ‡¥™‡µç‡¥∞‡¥§‡¥ø‡¥∞‡µã‡¥ß‡¥Ç ‡¥∏‡¥ú‡µÄ‡¥µ‡¥Æ‡¥æ‡¥ï‡µç‡¥ï‡¥ø.',
                theftAlertMsg: (loc) => `‡¥ó‡µÅ‡¥∞‡µÅ‡¥§‡¥∞‡¥Ç: ${loc} ‡µΩ ‡¥ö‡¥≤‡¥®‡¥Ç ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥ø. ‡¥Æ‡µã‡¥∑‡¥£ ‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§; ‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥â‡¥ü‡µª ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï.`,
                connectionFailed: '‡¥¨‡¥®‡µç‡¥ß‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µΩ ‡¥™‡¥∞‡¥æ‡¥ú‡¥Ø‡¥™‡µç‡¥™‡µÜ‡¥ü‡µç‡¥ü‡µÅ.',
                connectionLost: '‡¥¨‡¥®‡µç‡¥ß‡¥Ç ‡¥®‡¥∑‡µç‚Äå‡¥ü‡¥™‡µç‡¥™‡µÜ‡¥ü‡µç‡¥ü‡µÅ. ‡¥µ‡µÄ‡¥£‡µç‡¥ü‡µÅ‡¥Ç ‡¥¨‡¥®‡µç‡¥ß‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï.',
                toastT2: 'üö® ‡¥µ‡¥®‡µç‡¥Ø‡¥ú‡µÄ‡¥µ‡¥ø ‡¥Ö‡¥≤‡µá‡µº‡¥ü‡µç‡¥ü‡µç',
                toastT3: 'üõë ‡¥Æ‡µã‡¥∑‡¥£‡¥Ç ‡¥Ö‡¥≤‡µá‡µº‡¥ü‡µç‡¥ü‡µç'
            },
            ta: {
                motto: '‡Æ∏‡Øç‡ÆÆ‡Ææ‡Æ∞‡Øç‡Æü‡Øç ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡ØÅ, ‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Ææ‡Æ© ‡ÆÆ‡Æï‡Æö‡ØÇ‡Æ≤‡Øç.',
                langTitle: '‡ÆÆ‡Øä‡Æ¥‡Æø ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ',
                connStatusLabel: 'BLE ‡Æá‡Æ£‡Øà‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ®‡Æø‡Æ≤‡Øà:',
                connect: '‡Æö‡Æø‡Æ∏‡Øç‡Æü‡Æ§‡Øç‡Æ§‡ØÅ‡Æü‡Æ©‡Øç ‡Æá‡Æ£‡Øà‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç',
                connected: '‡Æá‡Æ£‡Øà‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ!',
                disconnected: '‡Æ§‡ØÅ‡Æ£‡Øç‡Æü‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ',
                strobeLabel: '‡Æ∏‡Øç‡Æü‡Øç‡Æ∞‡Øã‡Æ™‡Øç ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ:',
                tier1Title: '‡Æ®‡Æø‡Æ≤‡Øà 1 ‡Æ®‡Æø‡Æ≤‡Øà (‡Æ®‡ØÅ‡Æ£‡Øç‡Æ£‡Æø‡ÆØ ‡Æ™‡ØÇ‡Æö‡Øç‡Æö‡Æø)',
                tier2Title: '‡Æ®‡Æø‡Æ≤‡Øà 2 ‡Æµ‡Æø‡Æ¥‡Æø‡Æ™‡Øç‡Æ™‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç‡Æï‡Æ≥‡Øç (‡Æµ‡Æ©‡Æµ‡Æø‡Æ≤‡Æô‡Øç‡Æï‡ØÅ)',
                tier3Title: '‡Æ®‡Æø‡Æ≤‡Øà 3 ‡Æµ‡Æø‡Æ¥‡Æø‡Æ™‡Øç‡Æ™‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç‡Æï‡Æ≥‡Øç (‡Æ§‡Æø‡Æ∞‡ØÅ‡Æü‡Øç‡Æü‡ØÅ)',
                powerTitle: '‡Æ™‡Æµ‡Æ∞‡Øç ‡Æ®‡Æø‡Æ≤‡Øà',
                usageLabel: '‡Æ§‡Æ±‡Øç‡Æ™‡Øã‡Æ§‡Øà‡ÆØ ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Ææ‡Æü‡ØÅ:',
                leftLabel: '‡Æ™‡Øá‡Æü‡Øç‡Æü‡Æ∞‡Æø ‡ÆÆ‡ØÄ‡Æ§‡ÆÆ‡Øç:',
                lowBattery: '‡Æï‡ØÅ‡Æ±‡Øà‡Æ®‡Øç‡Æ§ ‡Æ™‡Øá‡Æü‡Øç‡Æü‡Æ∞‡Æø!',
                tier2Initial: '‡Æ®‡Æø‡Æ≤‡Øà 2 ‡Æµ‡Æø‡Æ¥‡Æø‡Æ™‡Øç‡Æ™‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡Ææ‡Æï ‡Æï‡Ææ‡Æ§‡Øç‡Æ§‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...',
                tier3Initial: '‡Æ®‡Æø‡Æ≤‡Øà 3 ‡Æµ‡Æø‡Æ¥‡Æø‡Æ™‡Øç‡Æ™‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡Ææ‡Æï ‡Æï‡Ææ‡Æ§‡Øç‡Æ§‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...',
                connecting: '‡Æá‡Æ£‡Øà‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...',
                readingStatus: '‡Æá‡Æ£‡Øà‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ. ‡Æ®‡Æø‡Æ≤‡Øà ‡Æ™‡Æü‡Æø‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...',
                strobeInactive: '‡Æö‡ØÜ‡ÆØ‡Æ≤‡Æ±‡Øç‡Æ±‡Æ§‡ØÅ',
                strobeStatusChecking: '‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...',
                strobeStatusLow: '‡Æö‡ØÜ‡ÆØ‡Æ≤‡Æø‡Æ≤‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ (‡Æï‡ØÅ‡Æ±‡Øà‡Æ®‡Øç‡Æ§ ‡Æ§‡ØÄ‡Æµ‡Æø‡Æ∞‡ÆÆ‡Øç)',
                strobeStatusHigh: '‡Æö‡ØÜ‡ÆØ‡Æ≤‡Æø‡Æ≤‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ (‡ÆÖ‡Æ§‡Æø‡Æï ‡Æ§‡ØÄ‡Æµ‡Æø‡Æ∞‡ÆÆ‡Øç)',
                wildlifeAlertMsg: '‡Æµ‡Æ©‡Æµ‡Æø‡Æ≤‡Æô‡Øç‡Æï‡ØÅ ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡ÆØ‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ. ‡Æ§‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡Æ©‡Øç ‡Æá‡ÆØ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ.',
                theftAlertMsg: (loc) => `‡ÆÆ‡ØÅ‡Æï‡Øç‡Æï‡Æø‡ÆØ‡ÆÆ‡Ææ‡Æ©: ${loc} ‡Æá‡Æ≤‡Øç ‡ÆÖ‡Æö‡Øà‡Æµ‡ØÅ ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡ÆØ‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ. ‡Æ§‡Æø‡Æ∞‡ØÅ‡Æü‡Øç‡Æü‡ØÅ ‡Æé‡Æö‡Øç‡Æö‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Øà; ‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æâ‡Æü‡Æ©‡Øá ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.`,
                connectionFailed: '‡Æá‡Æ£‡Øà‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ§‡Øã‡Æ≤‡Øç‡Æµ‡Æø‡ÆØ‡Æü‡Øà‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ.',
                connectionLost: '‡Æá‡Æ£‡Øà‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ§‡ØÅ‡Æ£‡Øç‡Æü‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æ£‡Øà‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.',
                toastT2: 'üö® ‡Æµ‡Æ©‡Æµ‡Æø‡Æ≤‡Æô‡Øç‡Æï‡ØÅ ‡Æµ‡Æø‡Æ¥‡Æø‡Æ™‡Øç‡Æ™‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç',
                toastT3: 'üõë ‡Æ§‡Æø‡Æ∞‡ØÅ‡Æü‡Øç‡Æü‡ØÅ ‡Æµ‡Æø‡Æ¥‡Æø‡Æ™‡Øç‡Æ™‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç'
            }
        };

        // --- Core Functions ---

        // Shows a transient pop-up notification
        function showToast(message, type, duration = 5000) {
            const toast = document.createElement('div');
            toast.className = `toast ${type} transition duration-500 ease-in-out`;
            
            let toastMessage = message;
            if (typeof message === 'function') {
                const loc = theftLocations[locationIndex];
                toastMessage = message(loc);
            }

            toast.innerHTML = `<span class="font-bold">${type === 't2' ? translations[currentLanguage].toastT2 : translations[currentLanguage].toastT3}</span><br>${toastMessage}`;
            
            toastContainer.prepend(toast);
            
            // Apply show class after a short delay for animation
            setTimeout(() => toast.classList.add('show'), 10);

            // Remove after duration
            setTimeout(() => {
                toast.classList.remove('show');
                // Wait for transition to finish before removal
                setTimeout(() => toast.remove(), 500);
            }, duration);
        }

        // Logs the alert to the correct tab list
        function logAlert(message, isCritical) {
            const t = translations[currentLanguage];
            const logElement = isCritical ? tier3Log : tier2Log;
            
            // Clear initial messages if needed
            if (logElement.querySelector(`#tier${isCritical ? 3 : 2}Initial`)) {
                logElement.innerHTML = '';
            }
            
            const time = new Date().toLocaleTimeString();
            const listItem = document.createElement('li');
            listItem.classList.add('log-item');
            if (isCritical) listItem.classList.add('critical');
            
            // Handle functional theft message
            let displayMessage = message;
            if (isCritical && typeof message === 'function') {
                displayMessage = message(theftLocations[locationIndex]);
            }
            
            listItem.innerHTML = `
                <span class="flex-grow">${displayMessage}</span>
                <span class="text-xs text-gray-500">${time}</span>
            `;
            
            logElement.prepend(listItem);
            
            // Show toast notification
            showToast(message, isCritical ? 't3' : 't2');

            // Keep the log clean (max 8 items)
            while (logElement.children.length > 8) {
                logElement.removeChild(logElement.lastChild);
            }
        }
        
        function updateStrobeStatus(key) {
            const t = translations[currentLanguage];
            strobeStatusElement.textContent = t[key];
            
            strobeStatusElement.classList.remove('text-gray-500', 'text-blue-500', 'text-yellow-600', 'text-green-600');

            if (key === 'strobeInactive') {
                strobeStatusElement.classList.add('text-gray-500');
            } else if (key === 'strobeStatusChecking') {
                strobeStatusElement.classList.add('text-blue-500');
            } else if (key === 'strobeStatusLow') {
                strobeStatusElement.classList.add('text-yellow-600');
            } else if (key === 'strobeStatusHigh') {
                strobeStatusElement.classList.add('text-green-600');
            }
        }

        function simulatePower() {
            const minDrain = 0.05; // 0.05% drain per interval
            const maxDrain = 0.5; // 0.5% drain per interval
            const usageMin = 10;
            const usageMax = 50;
            
            powerTimer = setInterval(() => {
                // 1. Simulate Power Drain
                const currentUsage = Math.floor(Math.random() * (usageMax - usageMin + 1)) + usageMin;
                const drainRate = currentUsage / 1000 * (Math.random() * (maxDrain - minDrain) + minDrain);
                
                powerLeft = Math.max(0, powerLeft - drainRate);
                
                // 2. Update DOM
                const percentage = powerLeft.toFixed(1);
                powerUsageValue.textContent = `${currentUsage} W`;
                powerLeftValue.textContent = `${percentage} %`;
                powerBar.style.width = `${percentage}%`;

                // 3. Update Bar Color based on level and display warning
                batteryWarning.textContent = '';
                batteryWarning.classList.add('hidden');

                if (powerLeft > 40) {
                    powerBar.className = 'power-bar bg-green-500';
                } else if (powerLeft > 15) {
                    powerBar.className = 'power-bar bg-yellow-500';
                } else {
                    powerBar.className = 'power-bar bg-red-600';
                    batteryWarning.textContent = translations[currentLanguage].lowBattery;
                    batteryWarning.classList.remove('hidden');
                }

                if (powerLeft === 0) {
                    clearInterval(powerTimer);
                    connectionStatusElement.textContent = translations[currentLanguage].connectionLost;
                    connectionStatusElement.classList.remove('text-green-600');
                    connectionStatusElement.classList.add('text-red-500');
                    isConnected = false;
                    clearInterval(simulationTimer);
                }
            }, 3000); 
        }
        
        // Simulates receiving BLE notifications (Tier 1, 2 & 3)
        function simulateAlerts() {
            let alertCounter = 0;
            const t = translations[currentLanguage];
            
            // Initialize/clear logs with the correct language message
            tier2Log.innerHTML = `<li class="log-item text-gray-500" id="tier2Initial">${t.tier2Initial}</li>`;
            tier3Log.innerHTML = `<li class="log-item text-gray-500" id="tier3Initial">${t.tier3Initial}</li>`;

            // Reset indexes
            strobeStatusIndex = 0;
            locationIndex = 0;

            simulationTimer = setInterval(() => {
                alertCounter++;
                
                // 1. Update Tier 1 Status (Micro-Pest)
                strobeStatusIndex = (strobeStatusIndex + 1) % strobeStatusKeys.length;
                updateStrobeStatus(strobeStatusKeys[strobeStatusIndex]);

                if (alertCounter % 4 === 0) {
                    // 2. Tier 3: Critical Alert (Theft)
                    logAlert(t.theftAlertMsg, true);
                    locationIndex = (locationIndex + 1) % theftLocations.length; // Cycle location
                } else if (alertCounter % 2 === 0) {
                    // 3. Tier 2: Wildlife Alert
                    logAlert(t.wildlifeAlertMsg, false);
                }
                // No alert 1/4 of the time
            }, 5000); // Check for a simulated alert every 5 seconds
        }

        // Updates all text elements based on the selected language
        function setLanguage(lang) {
            const t = translations[lang];
            if (!t) return;

            // Simple text updates
            document.getElementById('motto').textContent = t.motto;
            document.getElementById('langTitle').textContent = `${t.langTitle} / ${translations.en.langTitle}`;
            document.getElementById('connStatusLabel').textContent = t.connStatusLabel;
            document.getElementById('connectButton').textContent = t.connect;
            document.getElementById('strobeLabel').textContent = t.strobeLabel;
            document.getElementById('tier1Title').textContent = t.tier1Title;
            document.getElementById('tier2Title').textContent = t.tier2Title;
            document.getElementById('tier3Title').textContent = t.tier3Title;
            document.getElementById('powerTitle').textContent = t.powerTitle;
            document.getElementById('usageLabel').textContent = t.usageLabel;
            document.getElementById('leftLabel').textContent = t.leftLabel;

            // Update low battery warning if needed
            if (powerLeft <= 15) {
                batteryWarning.textContent = t.lowBattery;
            } else {
                batteryWarning.textContent = '';
            }


            // Dynamic status updates (needs to be checked against current state)
            if (isConnected) {
                connectionStatusElement.textContent = t.connected;
                // Update Strobe status based on current index
                updateStrobeStatus(strobeStatusKeys[strobeStatusIndex]);
            } else {
                 connectionStatusElement.textContent = t.disconnected;
                 strobeStatusElement.textContent = t.strobeInactive;
                 updateStrobeStatus('strobeInactive');
            }
            
            // Update initial alert messages
            const t2Init = document.getElementById('tier2Initial');
            if (t2Init) t2Init.textContent = t.tier2Initial;
            
            const t3Init = document.getElementById('tier3Initial');
            if (t3Init) t3Init.textContent = t.tier3Initial;
            
            // Update active button state
            langButtons.forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-lang="${lang}"]`).classList.add('active');

            currentLanguage = lang;
        }

        // Simulates the BLE connection process
        function connectBLE() {
            if (isConnected) return;
            
            // Clear existing timers
            clearInterval(simulationTimer);
            clearInterval(powerTimer);

            // Reset Power
            powerLeft = 100.0;
            powerUsageValue.textContent = `-- W`;
            powerLeftValue.textContent = `-- %`;
            powerBar.style.width = `0%`;
            batteryWarning.classList.add('hidden');


            // Start connection state
            connectButton.disabled = true;
            connectButton.textContent = translations[currentLanguage].connecting;
            connectionStatusElement.textContent = translations[currentLanguage].connecting;
            connectionStatusElement.classList.remove('text-red-500', 'text-green-600');
            connectionStatusElement.classList.add('text-blue-500');

            // --- Simulation Logic ---
            setTimeout(() => {
                const success = Math.random() > 0.1; 

                if (success) {
                    isConnected = true;
                    connectionStatusElement.textContent = translations[currentLanguage].connected;
                    connectionStatusElement.classList.remove('text-blue-500', 'text-red-500');
                    connectionStatusElement.classList.add('text-green-600');
                    connectButton.textContent = translations[currentLanguage].connected;
                    
                    // Simulate status read (Tier 1 & Power)
                    setTimeout(() => {
                        // Start status updates and power simulation
                        updateStrobeStatus('strobeStatusChecking');
                        simulateAlerts();
                        simulatePower();

                    }, 1500); 

                } else {
                    // Connection failure
                    isConnected = false;
                    connectionStatusElement.textContent = translations[currentLanguage].disconnected;
                    connectionStatusElement.classList.remove('text-blue-500', 'text-green-600');
                    connectionStatusElement.classList.add('text-red-500');
                    connectButton.textContent = translations[currentLanguage].connect;
                }
                connectButton.disabled = false;
            }, 3000); 
        }

        // --- Event Listeners ---
        connectButton.addEventListener('click', connectBLE);
        
        langButtons.forEach(button => {
            button.addEventListener('click', () => {
                const newLang = button.getAttribute('data-lang');
                setLanguage(newLang);
                
                // If connected, restart simulation to update alert message text
                if (isConnected) {
                    clearInterval(simulationTimer);
                    simulateAlerts();
                }
            });
        });

        // Initialize with default English text
        document.addEventListener('DOMContentLoaded', () => {
            setLanguage('en');
        });
    </script>
</body>
</html>